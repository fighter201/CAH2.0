<html>
    <head>
        <script src="/socket.io/socket.io.js"></script>
        <script> var socket = io('/lobby'); </script>
    </head>
    <body>
        <p>
            WaitingLobby
            sakdf !!!
        </p>
        <p id='lobbyID'></p>
        <!-- only visable if user is creator -->
        <button id='startGame', onClick='startGame()', style="visibility: hidden">please fick me</button>
    </body>

    <script>
        document.getElementById('lobbyID').innerText="you are in Lobby: " + window.sessionStorage.getItem('gameID');
    </script>

    <script>
        
        // console.log(window.sessionStorage.getItem('master'));
        if (window.sessionStorage.getItem('master')==='true'){
            var button = document.getElementById('startGame');
            button.style.visibility='visible';
        }
    </script>

    <script>
        
        // checkConnection();

        // console.log(socket);
        // const gameId = 'defGameid';
        //get user id from session variable
        // var isMaster = false;
        // if (isMaster){
        //     document.getElementById('startGame').style.visibility='visible';
        // }

        //get gameId
        // var gameId = "";
        // var userId = "default user";


        var gameID = window.sessionStorage.getItem('gameID');
        var playerID = "defPlayer";

        socket.emit('inWaitingLobby', gameID, playerID);

        socket.on('startGame', function() {
            window.location.href = '/game.html';
        });

        // function checkConnection(){
        //     if (socket.connected == false){
        //     console.log('create lobby with this id');
        //     window.location.href = '/';
        //     }
        // }

        function startGame() {
            // window.location.href = '/';
            socket.emit('gameStart', gameID);
        }
    </script>

</html>